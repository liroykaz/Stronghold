<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://editorCaption"
        class="com.haulmont.stronghold.web.material.MaterialEdit"
        datasource="materialDs"
        focusComponent="fieldGroup"
        messagesPack="com.haulmont.stronghold.web.material">
    <dsContext>
        <datasource id="materialDs"
                    class="com.haulmont.stronghold.entity.Material"
                    view="material-view">
            <collectionDatasource id="attachmentDs"
                                  property="attachment"/>
        </datasource>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout expand="windowActions"
            spacing="true">
        <fieldGroup id="fieldGroup"
                    datasource="materialDs">
            <column width="250px">
                <field caption="msg://Material type"
                       property="typeMaterial"/>
                <field caption="msg://Duration"
                       property="duration"/>
            </column>
        </fieldGroup>
        <groupBox id="attachmentBox"
                  caption="msg://Work with attachments"
                  spacing="true">
            <buttonsPanel>
                <popupButton id="popupButton"
                             caption="msg://Загрузить">
                    <actions>
                        <action id="singleUpload"
                                caption="SingleUpload"
                                invoke="onSingleUpload"/>
                        <action id="multiUpload"
                                caption="MultiUpload"
                                invoke="onMultiUpload"/>
                    </actions>
                </popupButton>
                <upload id="uploadField"
                        datasource="attachmentDs"
                        property="attachment"/>
                <button id="addButton"
                        action="dataGrid.edit"/>
                <multiUpload id="multiUploadField"
                             caption="msg://Multi add"/>
                <button id="removeButton"
                        action="dataGrid.remove"/>
                <button id="buttonDownload"
                        caption="msg://Download"
                        invoke="onButtonDownloadClick"
                        visible="false"/>
            </buttonsPanel>
            <dataGrid id="dataGrid"
                      datasource="attachmentDs"
                      height="200px"
                      width="100%">
                <actions>
                    <action id="create"/>
                    <action id="edit"/>
                    <action id="remove"/>
                    <action id="add"/>
                </actions>
                <columns>
                    <column id="attachment"
                            caption="msg://Attachment"
                            editable="false"
                            property="attachment"/>
                    <column id="comment"
                            caption="msg://Comment"
                            editable="false"
                            property="comments"/>
                </columns>
            </dataGrid>
        </groupBox>
        <frame id="windowActions"
               height="369px"
               screen="editWindowActions"/>
    </layout>
</window>
